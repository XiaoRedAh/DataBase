https://zhuanlan.zhihu.com/p/356216273

# 前置

**关系模型**：对应于编程语言的类型定义，由属性序列及各属性对应域组成。

**关系实例**：对应于编程语言中变量的值。关系更新时，关系实例的内容可能随之发生改变，但关系模式是不变的。

在关系模型中，**关系**指代表，**元组**（记录）指代行，**属性**（字段）指代表中的列。

**超键**：一个或多个属性的集合。通过超键可以唯一地标识一个元组。

**候选键**：不含多余元素的超键，也称为最小超键。一个关系可以有多个候选键。

**主键**：选择一个候选键作为主键，每个关系有且仅有一个主键。

**外键**：如果关系模式 R1 中的属性 K 是其他关系模式R2的主键，那么 K 在R1上称作参照R2的外键。R1称为外键依赖的参照关系，R2称作外键的被参照关系。

**主属性**：包含在任一候选键中的属性

**非主属性**：不包含在任意候选中的属性

# 设计构成概览

* **需求分析**
* **概念设计**：定义数据库的实体，实体的属性，实体之间的联系，以及实体和联系上的约束。实体-联系模型（E-R模型）常用于此阶段，并构建出实体-联系图（E-R图）对模式进行图形化描述。
* **逻辑设计**：将高层概念模型（E-R模型）映射到将使用的数据库的实现数据模型（关系数据模型）上。
* **物理设计**：指明数据库的物理特征，包括文件组织格式和索引结构的选择。
* **数据库实施**
* **数据库运行维护**

# 需求分析

略

# 概念设计

## E-R模型

### 实体集

名词概念。

实体集：相同类型即具有相同性质（或属性）的一个实体集合。

实体集的外延：实体集的实体的实际集合。

比如：大学老师是一个实体集，大学老师中实际老师的集合是实体集的外延。

实体集不必互不相交：一个人既可以是学生实体，也可以是公民实体。

实体通过一组属性来表示。属性是实体集中每个成员所拥有的描述性性质。



### 联系集

动词概念。

联系指多个实体间的相互关联。联系中的实体可以来自不同的实体集，也可以来自同一个实体集

联系集是相同类型联系的集合。

联系集也可以有起描述作用的属性。

参与联系集的实体类的数目称为联系集的度。

参与是指实体集与联系集间的关联。也就是说，如果联系集R 涉及到实体集E1, E2, …, En，那么我们说实体集E1, E2, …, En参与了联系集R


### 属性

属性：实体集中每个成员（实体）都拥有的，起描述作用的性质。正规的说，实体集的属性是将实体集映射到域的函数。

域/值集：属性可能取值的集合

属性可以有如下两种划分：

* 简单和复合属性
  * 简单属性：不能再划分
  * 复合属性：可以再划分（parent划分为father和mather），甚至可以有层次（address划分出一个子属性street，子属性street又划分出street_number，street_name）
* 单值和多值属性
  * 单值属性：比如出生年月
  * 多值属性：一个属性可能对应一组值。（phone_number属性，每个人可以有0，1，或多个电话号码）


派生属性：从别的相关属性或实体类派生出来。它的值不存储，而是在需要的时候计算出来。【比如：tax=0.5 * salary，tax是派生属性，salary是基属性】

## 约束

### 映射基数

映射约束表示一个实体通过一个联系集能关联的实体的个数（输入一个x得到几个y）。在描述二元联系集时非常有用。

对于实体集A，B间的二元联系集R来说，映射基数必然是一下情况之一：
* 一对一
* 一对多
* 多对一
* 多对多

### 码（主键）

关系模式的码（主键）的概念直接适用于实体集。

联系集的码（主键）结构依赖于联系集的映射基数：
* 多对多的二元联系，参与实体集的主码属性的并集成为主码。
* 一对一的二元联系，任一实体集的主码属性可以选作主码。
* 多对一或一对多的二元联系，“多”的那一方实体集的主码属性成为主码
* 对于非二元联系，若没有基数限制，选超码作主码；如果有限制，就比较复杂了。

## E-R图

## E-R设计问题

# 逻辑设计

## E-R图转化为关系数据模型

## 关系模式规范化

## 函数依赖理论

### 函数依赖集的闭包

### 属性集的闭包

### 正则（最小）覆盖

### 无损分解

### 保持依赖