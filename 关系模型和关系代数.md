关系的定义及性质
关系模式与关系实例  
理解三类关系完整性
关系的候选键、主键、外键
用关系代数表达查询
关系代数的基本运算   
掌握选择、投影、连接、差运算等  
除运算不考查
关系演算不考查

# 关系模型概览

**关系模型是一种数据模型**，是关系数据库的理论基础

对应于数据模型的三要素，**关系模型的三要素**为：
* 单一数据结构 —— 关系
* 数据操作 —— 关系操作，即关系代数（是过程化语言，而sql是非过程化语言）
* 数据完整性 —— 关系完整性
  * 实体完整性
  * 参照完整性
  * 用户定义的完整性

# 数据结构—关系

## 基本概念

**关系的定义**
* 数学上：定义在域D1, D2, …, Dn上的关系R是**笛卡儿积D1×D2×…×Dn的一个命名子集（有意义的元组构成笛卡尔积的一个子集，赋予其名字，就是关系）**
  * R即是关系名。
  * R⊆D1×D2×…×Dn
* 在关系模型的术语中，关系用来指代表

**关系的组成**
* 关系的一列是属性，属性必定有名字（属性名）
* 关系的一行是元组
* 分量是行和列的交叉，也就是某个元组的某个属性（值）
* 关系的度: 属性的数目
* 关系的基数: 元组的数目
* 属性的域: 属性可能取值的集合

**关系的性质（必须满足的条件）**
* **列是同质的**。列中的分量类型必须相同，因为它们来自同一个域。
* 不同的列可来自同个域，但**属性名不能相同**
* 关系里的**任意两行不能相同**，因为关系是一个元组集合（数学上禁止，实际数据库里可以容忍重复，用主键区分）
* 关系的**行或列是无序的**。即改变行或列的次序，关系不会变
* **属性值(分量)必须是原子的(不可分)**。多值属性，复合属性都是非原子的。关系必须满足第一范式

## 关系的码

**超键**：一个或多个属性的集合。通过超键可以唯一地标识关系中的每一个元组。

**候选键**：不含多余元素的超键，也称为最小超键。一个关系可以有多个候选键。

**主键**：选择一个候选键作为主键，每个关系有且仅有一个主键。

**外键**：关系R1中的单个属性或属性集合，对应关系R2的主码。R1称为参照关系，R2称为被参照关系。【注意：这时值的参照，而非名字的参照。外键和对应主码的属性名不一定要相同】

**几个问题**
>Q：实体集有哪些码？
A：超码，候选码，主码
Q：关系有哪些码？
A：超码，候选码，主码，外部码
Q：关系的外部码是如何“得来”的?
A：从联系集转化而来
Q：外部码能对应同一个关系中的主码么？
A：可以。比如学生分为组长和组员两个角色，联系是指导和被指导

## 关系模式和实例

**关系模式**是关系的逻辑设计（结构），对应于编程语言的类型定义，由属性序列及各属性对应域组成【数据库中，表的结构（属性）】。完整定义如下：
R(U, D, dom, F)
* R: 关系名
* U: 关系属性的集合
* D:　　域的集合　
* Dom: 属性到域的映射(每个属性是什么域的?)
* F: 属性间依赖关系的集合

简记为R(A1, A2, …, An)。A1, A2, …, An 为 R中的所有属性

**关系实例**【数据库中，表的具体内容（元组）】
* 对应于编程语言中变量的值，即在某一特定时刻上关系的具体内容
* 提到“关系”时，有时指“关系实例”，有时指“关系模式”

**举例**

关系student的关系模式：student(sno,name,sex)
关系student的关系实例：
|sno|name|sex|
|--|--|--|
|1|小明|男|
|2|小红|女|

**比较**

关系模式比较稳定，不常变化。而关系实例随时间而变化，原因是元组不断被插入/删除/更新。

# 数据操作—关系代数（操作）

## 查询语言概述

关系操作：对关系进行操作，常见的有查询操作和修改操作。查询操作是修改操作的基础，修改操作实际是对查询出来的结果进行修改。

关系操作的表示：**查询语言**
* **关系模型中使用“纯”查询语言**，如关系代数、关系演算
  * 关系代数：用关系运算来表示查询和修改。
  * 关系演算：用谓词演算来表示查询和修改。根据谓词的不同，又分为元组关系演算和域关系演算
* **关系数据库中使用实际的查询语言**，如SQL

**查询语言的分类**
* **过程化**：用户要指定 ① what: 查询什么 ② how: 怎么查询，要用什么样的方法、过程？
* **非过程化**：用户只要指定查询什么，而“怎么查询”的问题留给系统处理，系统会自动寻找(近似)最优的查询方法，又叫查询执行计划。

**关系代数是过程化的，SQL和关系演算是非过程化**

## 什么是关系代数

**代数系统的组成**
* 运算对象
* 基于运算对象的一组运算

**关系代数**
关系 —— 运算对象
选择，投影，…… —— 基于关系的一组运算

**关系代数是封闭的，任何关系运算的结果还是一个关系**

**关系运算的分类**
* **基本运算**：选择；投影；笛卡儿积；集合并；集合差；更名
* **附加运算**（非基本的，可以用基本运算的组合来替换）：集合交；自然连接；除法；赋值
* **扩展运算**（前两种基础上对运算能力进行扩展和增强）：广义投影；外连接；聚集运算

## 具体看书

这部分涉及大量的符号，不好写，看书+做题就行。


# 数据完整性—关系完整性

  